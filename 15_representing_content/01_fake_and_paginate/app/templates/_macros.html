{% macro render_pagination(pagination, endpoint, todo_id, page_param,
other_page, other_page_value) %} {% if pagination.pages > 1 %}
<div class="pagination">
  {% set current_page = pagination.page %} {% set total_pages = pagination.pages
  %} {% macro page_url(page_num) %} {{ url_for(endpoint, id=todo_id) }}?{{
  page_param }}={{ page_num }}&{{ other_page }}={{ other_page_value }} {%
  endmacro %} {% if total_pages <= 7 %} {% for page_num in range(1, total_pages
  + 1) %} {% if page_num == current_page %}
  <span class="current">[{{ page_num }}]</span>
  {% else %}
  <a href="{{ page_url(page_num) }}">{{ page_num }}</a>
  {% endif %} {% endfor %} {% else %} {% if current_page == 1 %}
  <span class="current">[1]</span>
  <a href="{{ page_url(2) }}">2</a>
  <a href="{{ page_url(3) }}">3</a>
  <span class="ellipsis">...</span>
  <a href="{{ page_url(total_pages - 1) }}">{{ total_pages - 1 }}</a>
  <a href="{{ page_url(total_pages) }}">{{ total_pages }}</a>
  {% elif current_page == 2 %}
  <a href="{{ page_url(1) }}">1</a>
  <span class="current">[2]</span>
  <a href="{{ page_url(3) }}">3</a>
  <span class="ellipsis">...</span>
  <a href="{{ page_url(total_pages - 1) }}">{{ total_pages - 1 }}</a>
  <a href="{{ page_url(total_pages) }}">{{ total_pages }}</a>
  {% elif current_page == total_pages %}
  <a href="{{ page_url(1) }}">1</a>
  <a href="{{ page_url(2) }}">2</a>
  <span class="ellipsis">...</span>
  <a href="{{ page_url(total_pages - 2) }}">{{ total_pages - 2 }}</a>
  <a href="{{ page_url(total_pages - 1) }}">{{ total_pages - 1 }}</a>
  <span class="current">[{{ total_pages }}]</span>
  {% elif current_page == total_pages - 1 %}
  <a href="{{ page_url(1) }}">1</a>
  <a href="{{ page_url(2) }}">2</a>
  <span class="ellipsis">...</span>
  <a href="{{ page_url(total_pages - 2) }}">{{ total_pages - 2 }}</a>
  <span class="current">[{{ total_pages - 1 }}]</span>
  <a href="{{ page_url(total_pages) }}">{{ total_pages }}</a>
  {% else %}
  <a href="{{ page_url(1) }}">1</a>
  <a href="{{ page_url(2) }}">2</a>
  <span class="ellipsis">...</span>
  <a href="{{ page_url(current_page - 1) }}">{{ current_page - 1 }}</a>
  <span class="current">[{{ current_page }}]</span>
  <a href="{{ page_url(current_page + 1) }}">{{ current_page + 1 }}</a>
  <span class="ellipsis">...</span>
  <a href="{{ page_url(total_pages - 1) }}">{{ total_pages - 1 }}</a>
  <a href="{{ page_url(total_pages) }}">{{ total_pages }}</a>
  {% endif %} {% endif %}
</div>
{% endif %} {% endmacro %}
